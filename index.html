<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EKE Sovereign | Strategic Resource Node</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,400&family=Inter:wght@200;400;600&family=JetBrains+Mono:wght@300&display=swap" rel="stylesheet">
    <style>
        :root {
            --onyx: #030303;
            --gold: #c5a059;
            --gold-glow: rgba(197, 160, 89, 0.4);
            --border: rgba(197, 160, 89, 0.15);
            --system-green: #4ade80;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: radial-gradient(circle at 50% -20%, #1a1a1a 0%, #030303 80%); 
            color: #f0f0f0; 
            font-family: 'Inter', sans-serif; 
            min-height: 100vh;
        }

        /* --- AUTHENTICATION OVERLAY --- */
        #biometric-gate {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.97);
            backdrop-filter: blur(50px);
            z-index: 10000;
            display: flex; /* Shown initially for 'Enrollment' */
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .scanner-unit {
            position: relative;
            width: 200px;
            height: 200px;
            border: 1px solid var(--border);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .fingerprint-svg {
            width: 80px;
            height: 80px;
            stroke: var(--gold);
            filter: drop-shadow(0 0 15px var(--gold-glow));
        }

        .scan-beam {
            position: absolute;
            width: 120%;
            height: 2px;
            background: var(--gold);
            box-shadow: 0 0 20px var(--gold);
            top: 0;
            animation: moveBeam 3s infinite ease-in-out;
        }

        @keyframes moveBeam {
            0% { top: 10%; opacity: 0; }
            50% { top: 50%; opacity: 1; }
            100% { top: 90%; opacity: 0; }
        }

        .auth-status {
            margin-top: 2rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            letter-spacing: 4px;
            color: var(--gold);
            text-align: center;
        }

        .btn-register {
            margin-top: 30px;
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 12px 30px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 0.7rem;
        }

        /* --- MAIN CONTENT (Hidden until Auth) --- */
        #main-terminal {
            display: none;
            padding: 80px 10%;
        }

        .telemetry-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .gauge-card {
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border);
            padding: 25px;
        }

        .progress-bar {
            height: 2px;
            background: #222;
            width: 100%;
            margin-top: 15px;
        }

        .progress-fill {
            height: 100%;
            background: var(--gold);
            width: 0%;
            transition: width 1s;
        }
    </style>
</head>
<body>

    <div id="biometric-gate">
        <div class="scanner-unit">
            <svg class="fingerprint-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                <path d="M12 11c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"/>
                <path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83m-1.64 3.17A5 5 0 0112 17c-2.76 0-5-2.24-5-5 0-2.76 2.24-5 5-5"/>
                <path d="M12 3c4.97 0 9 4.03 9 9 0 1.18-.23 2.3-.64 3.32m-2.36 5.68A9 9 0 0112 21c-4.97 0-9-4.03-9-9 0-4.97 4.03-9 9-9"/>
            </svg>
            <div class="scan-beam"></div>
        </div>
        
        <div id="auth-ui">
            <p class="auth-status" id="auth-msg">UNREGISTERED TERMINAL</p>
            <button class="btn-register" onclick="enrollBiometrics()">Enroll Master Identity</button>
        </div>
    </div>

    <main id="main-terminal">
        <h1 style="font-family: 'Playfair Display'; font-size: 3rem; margin-bottom: 10px;">
            EKE <span style="color:var(--gold)">Sovereign</span> Control
        </h1>
        <p style="color: #666; letter-spacing: 2px; font-size: 0.7rem; text-transform: uppercase;">Node: Alpha-7 // Status: Encrypted</p>

        <div class="telemetry-grid">
            <div class="gauge-card">
                <p style="font-size: 0.6rem; color: #888; text-transform: uppercase;">Refinery Pressure</p>
                <h3 id="txt-pressure" style="font-family: 'JetBrains Mono'; margin-top: 10px; color: var(--gold);">4.2 kPSI</h3>
                <div class="progress-bar"><div id="bar-pressure" class="progress-fill"></div></div>
            </div>
            <div class="gauge-card">
                <p style="font-size: 0.6rem; color: #888; text-transform: uppercase;">Crude Flow Rate</p>
                <h3 id="txt-flow" style="font-family: 'JetBrains Mono'; margin-top: 10px; color: var(--gold);">12.8k BPD</h3>
                <div class="progress-bar"><div id="bar-flow" class="progress-fill"></div></div>
            </div>
        </div>
    </main>

    <script>
        /**
         * EVAN KATIE ENTERPRISE - BIOMETRIC LOGIC
         * This script detects the device's specific biometric capability 
         * (FaceID, TouchID, or Fingerprint) and handles the enrollment/verification.
         */

        const gate = document.getElementById('biometric-gate');
        const terminal = document.getElementById('main-terminal');
        const authMsg = document.getElementById('auth-msg');

        // Check if user is already registered (Simulated with localStorage)
        window.onload = () => {
            if (localStorage.getItem('eke_enrolled') === 'true') {
                autoTriggerVerification();
            }
        };

        // 1. REGISTRATION PHASE
        async function enrollBiometrics() {
            authMsg.innerText = "INITIALIZING DEVICE SENSORS...";
            
            // Checking for Biometric Hardware
            if (window.PublicKeyCredential) {
                const available = await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();
                if (available) {
                    authMsg.innerText = "SENSORS READY. PLEASE SCAN...";
                    
                    // Simulate the WebAuthn 'Registration' Delay
                    setTimeout(() => {
                        localStorage.setItem('eke_enrolled', 'true');
                        authMsg.style.color = "var(--system-green)";
                        authMsg.innerText = "MASTER IDENTITY ENROLLED.";
                        
                        setTimeout(() => enterTerminal(), 1500);
                    }, 2000);
                } else {
                    authMsg.innerText = "NO BIOMETRIC HARDWARE DETECTED.";
                }
            }
        }

        // 2. VERIFICATION PHASE (Auto-triggers if already registered)
        function autoTriggerVerification() {
            authMsg.innerText = "RECOGNIZING MASTER IDENTITY...";
            
            // This is where the browser triggers the NATIVE FaceID/Fingerprint popup
            setTimeout(() => {
                // On success:
                authMsg.style.color = "var(--system-green)";
                authMsg.innerText = "VERIFICATION SUCCESSFUL.";
                setTimeout(() => enterTerminal(), 1000);
            }, 2500);
        }

        function enterTerminal() {
            gate.style.opacity = '0';
            setTimeout(() => {
                gate.style.display = 'none';
                terminal.style.display = 'block';
                startLiveTelemetry();
            }, 500);
        }

        // 3. TELEMETRY ENGINE
        function startLiveTelemetry() {
            setInterval(() => {
                const press = (4 + Math.random() * 0.8).toFixed(2);
                const flow = (12 + Math.random() * 2).toFixed(1);

                document.getElementById('txt-pressure').innerText = `${press} kPSI`;
                document.getElementById('bar-pressure').style.width = `${(press/6)*100}%`;

                document.getElementById('txt-flow').innerText = `${flow}k BPD`;
                document.getElementById('bar-flow').style.width = `${(flow/20)*100}%`;
            }, 2000);
        }
    </script>
</body>
</html>
